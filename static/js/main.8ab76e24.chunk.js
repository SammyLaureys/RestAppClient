(this.webpackJsonpbooksclient=this.webpackJsonpbooksclient||[]).push([[0],{16:function(e,t,o){},18:function(e,t,o){},19:function(e,t,o){"use strict";o.r(t);var c=o(0),n=o(1),s=o.n(n),r=o(9),a=o.n(r),i=(o(16),o(10)),l=o(2),u=o.n(l),d=o(5),b=o(3);o(18);function j(e){var t=e.createBook,o=Object(n.useState)(""),s=Object(b.a)(o,2),r=s[0],a=s[1],i=Object(n.useState)(""),l=Object(b.a)(i,2),u=l[0],d=l[1];return Object(c.jsxs)("div",{className:"editbox",children:[Object(c.jsx)("div",{children:"new book"}),Object(c.jsxs)("div",{className:"editboxrow",children:[Object(c.jsx)("label",{children:"title: "}),Object(c.jsx)("input",{value:r,onChange:function(e){return a(e.target.value)}})]}),Object(c.jsxs)("div",{className:"editboxrow",children:[Object(c.jsx)("label",{children:"author: "}),Object(c.jsx)("input",{value:u,onChange:function(e){return d(e.target.value)}})]}),Object(c.jsx)("div",{className:"editboxbuttonrow",children:Object(c.jsx)("button",{onClick:function(){return t({title:r,author:u})},children:"create"})})]})}var p=o(6);function h(e){var t=e.selectedBook,o=e.setSelectedBook,n=e.editBook;return t?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"overlay",onClick:function(){return o()}}),Object(c.jsxs)("div",{className:"editbox modal",children:[Object(c.jsx)("div",{children:"edit the book"}),Object(c.jsxs)("div",{className:"editboxrow",children:[Object(c.jsx)("label",{children:"title: "}),Object(c.jsx)("input",{value:t.title,onChange:function(e){return o(Object(p.a)(Object(p.a)({},t),{},{title:e.target.value}))}})]}),Object(c.jsxs)("div",{className:"editboxrow",children:[Object(c.jsx)("label",{children:"author: "}),Object(c.jsx)("input",{value:t.author,onChange:function(e){return o(Object(p.a)(Object(p.a)({},t),{},{author:e.target.value}))}})]}),Object(c.jsxs)("div",{className:"editboxbuttonrow",children:[Object(c.jsx)("button",{onClick:function(){return o()},children:"cancel"}),Object(c.jsx)("button",{onClick:function(){return n(t)},children:"save"})]})]})]}):null}function k(e){var t=e.book,o=e.setSelectedBook,n=e.deleteBook;return Object(c.jsxs)("div",{className:"bookRow",children:[Object(c.jsx)("div",{className:"bookTitle",children:t.title}),Object(c.jsx)("div",{className:"bookAuthor",children:t.author}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:function(){return o(t)},children:"edit"})}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:function(){return n(t)},children:"delete"})})]})}var O=function(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),o=t[0],s=t[1],r=Object(n.useState)(),a=Object(b.a)(r,2),l=a[0],p=a[1],O=Object(n.useState)(!1),f=Object(b.a)(O,2),x=f[0],g=f[1],v=Object(n.useState)(),m=Object(b.a)(v,2),y=m[0],B=m[1];function N(){return(N=Object(d.a)(u.a.mark((function e(t){var c,n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("async createBook"),g(!0),c={method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)},e.prev=3,e.next=6,fetch("".concat("https://rest-app-server.herokuapp.com/books"),c);case 6:return n=e.sent,e.next=9,n.json();case 9:r=e.sent,n.ok?(console.log("   async createBook: received response ".concat(JSON.stringify(r))),s([].concat(Object(i.a)(o),[r])),console.log("   async createBook: done"),B("book ".concat(t.title," created"))):(console.log("   async createBook: ERROR: ".concat(n.status," - ").concat(r.error," - ").concat(r.message," ")),a=r.errors&&r.errors.reduce((function(e,t){return"".concat(e," ").concat(t.defaultMessage," ---")}),"--- "),console.log(" ".concat(JSON.stringify(r))),console.log(" ".concat(a)),B(a||r.message)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.log("   async createBook: ERROR ".concat(e.t0)),B("Connection error");case 17:g(!1);case 18:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function R(){return(R=Object(d.a)(u.a.mark((function e(t){var c,n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:return console.log("async editBook"),g(!0),c={method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)},e.prev=5,e.next=8,fetch("".concat("https://rest-app-server.herokuapp.com/books","/").concat(t.id),c);case 8:return n=e.sent,e.next=11,n.json();case 11:r=e.sent,n.ok?(console.log("   async editBook: received response ".concat(JSON.stringify(r))),s(o.map((function(e){return e.id===r.id?r:e}))),console.log("   async editBook: done"),B("book ".concat(t.title," modified"))):(console.log("   async editBook: ERROR: ".concat(n.status," - ").concat(r.error," - ").concat(r.message," ")),a=r.errors&&r.errors.reduce((function(e,t){return"".concat(e," ").concat(t.defaultMessage," ---")}),"--- "),console.log(" ".concat(JSON.stringify(r))),console.log(" ".concat(a)),B(a||r.message)),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(5),console.log("   async deleteBook: ERROR ".concat(e.t0)),B("Connection error");case 19:g(!1);case 20:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}function C(e){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(u.a.mark((function e(t){var c,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("async deleteBook"),g(!0),c={method:"DELETE"},e.prev=3,e.next=6,fetch("".concat("https://rest-app-server.herokuapp.com/books","/").concat(t.id),c);case 6:if(!(n=e.sent).ok){e.next=14;break}console.log("   async deleteBook: received response "),s(o.filter((function(e){return e.id!==t.id}))),console.log("   async deleteBook: done"),B("book ".concat(t.title," deleted")),e.next=19;break;case 14:return e.next=16,n.json();case 16:r=e.sent,console.log("   async deleteBook: ERROR: ".concat(n.status," - ").concat(r.error," - ").concat(r.message," ")),B(r.message);case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(3),console.log("   async deleteBook: ERROR ".concat(e.t0)),B("Connection error");case 25:g(!1);case 26:case"end":return e.stop()}}),e,null,[[3,21]])})))).apply(this,arguments)}return console.log("render App()"),Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("   async getBooks: start"),g(!0),e.prev=2,e.next=5,fetch("".concat("https://rest-app-server.herokuapp.com/books"));case 5:return t=e.sent,e.next=8,t.json();case 8:o=e.sent,console.log("   async getBooks: received response ".concat(JSON.stringify(o))),s(o),console.log("   async getBooks: done"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.log("   async getBooks: ERROR ".concat(e.t0)),B("Connection error");case 18:g(!1);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}console.log("useEffect: start"),function(){e.apply(this,arguments)}(),console.log("useEffect: back after getBooks"),console.log("useEffect: done")}),[]),Object(c.jsxs)("div",{className:"App",children:[!!x&&Object(c.jsx)("p",{className:"isLoading",children:"LOADING DATA!!!"}),!!y&&Object(c.jsx)("p",{className:"message",onClick:function(){return B()},children:y}),Object(c.jsx)("div",{className:"booksList",children:o.map((function(e){return Object(c.jsx)(k,{book:e,setSelectedBook:p,deleteBook:C},e.title)}))}),Object(c.jsx)(j,{selectedBook:l,createBook:function(e){return N.apply(this,arguments)}}),Object(c.jsx)(h,{selectedBook:l,setSelectedBook:p,editBook:function(e){return R.apply(this,arguments)}})]})},f=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,20)).then((function(t){var o=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;o(e),c(e),n(e),s(e),r(e)}))};a.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(O,{})}),document.getElementById("root")),f()}},[[19,1,2]]]);
//# sourceMappingURL=main.8ab76e24.chunk.js.map
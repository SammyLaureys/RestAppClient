(this.webpackJsonpbooksclient=this.webpackJsonpbooksclient||[]).push([[0],{16:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(1),r=n.n(o),s=n(9),a=n.n(s),i=(n(16),n(3)),l=n.n(i),u=n(10),d=n(6),b=n(2);n(18);function j(e){var t=e.createBook,n=Object(o.useState)(""),r=Object(b.a)(n,2),s=r[0],a=r[1],i=Object(o.useState)(""),l=Object(b.a)(i,2),u=l[0],d=l[1],j=Object(o.useState)(""),p=Object(b.a)(j,2),h=p[0],O=p[1];return Object(c.jsx)("div",{className:"editbox",children:Object(c.jsxs)("form",{onSubmit:function(e){console.log("SUBMIT"),t({title:s,author:u,priceInEur:h}),e.preventDefault()},children:[Object(c.jsx)("div",{children:"new book"}),Object(c.jsxs)("div",{className:"editboxrow",children:[Object(c.jsx)("label",{children:"title: "}),Object(c.jsx)("input",{value:s,required:!0,onChange:function(e){return a(e.target.value)}})]}),Object(c.jsxs)("div",{className:"editboxrow",children:[Object(c.jsx)("label",{children:"author: "}),Object(c.jsx)("input",{value:u,required:!0,pattern:"[a-zA-Z ]*",type:"text",onChange:function(e){return d(e.target.value)}})]}),Object(c.jsxs)("div",{className:"editboxrow",children:[Object(c.jsx)("label",{children:"price (\u20ac): "}),Object(c.jsx)("input",{value:h,type:"number",min:"0",max:"2000",onChange:function(e){return O(parseInt(e.target.value)||null)}})]}),Object(c.jsx)("div",{className:"editboxbuttonrow",children:Object(c.jsx)("button",{children:"create"})})]})})}var p=n(4);function h(e){var t=e.selectedBook,n=e.setSelectedBook,o=e.editBook;return t?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"overlay",onClick:function(){return n()}}),Object(c.jsx)("div",{className:"editbox modal",children:Object(c.jsxs)("form",{onSubmit:function(e){console.log("SUBMIT"),o(t),n(),e.preventDefault()},children:[Object(c.jsx)("div",{children:"edit the book"}),Object(c.jsxs)("div",{className:"editboxrow",children:[Object(c.jsx)("label",{children:"title: "}),Object(c.jsx)("input",{value:t.title,required:!0,onChange:function(e){return n(Object(p.a)(Object(p.a)({},t),{},{title:e.target.value}))}})]}),Object(c.jsxs)("div",{className:"editboxrow",children:[Object(c.jsx)("label",{children:"author: "}),Object(c.jsx)("input",{value:t.author,required:!0,pattern:"[a-zA-Z ]*",type:"text",onChange:function(e){return n(Object(p.a)(Object(p.a)({},t),{},{author:e.target.value}))}})]}),Object(c.jsxs)("div",{className:"editboxrow",children:[Object(c.jsx)("label",{children:"price (\u20ac): "}),Object(c.jsx)("input",{value:t.priceInEur||"",type:"number",min:"0",max:"2000",onChange:function(e){return n(Object(p.a)(Object(p.a)({},t),{},{priceInEur:parseInt(e.target.value)||null}))}})]}),Object(c.jsxs)("div",{className:"editboxbuttonrow",children:[Object(c.jsx)("button",{type:"button",onClick:function(){return n()},children:"cancel"}),Object(c.jsx)("button",{children:"save"})]})]})})]}):null}function O(e){var t=e.book,n=e.setSelectedBook,o=e.deleteBook;return Object(c.jsxs)("div",{className:"bookRow",children:[Object(c.jsx)("div",{className:"bookTitle",children:t.title}),Object(c.jsx)("div",{className:"bookAuthor",children:t.author}),Object(c.jsxs)("div",{className:"bookPrice",children:[t.priceInEur,t.priceInEur&&" \u20ac"]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:function(){return n(t)},children:"edit"})}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:function(){return o(t)},children:"delete"})})]})}var x=function(){var e=Object(o.useState)([]),t=Object(b.a)(e,2),n=t[0],r=t[1],s=Object(o.useState)(),a=Object(b.a)(s,2),i=a[0],p=a[1],x=Object(o.useState)(!1),f=Object(b.a)(x,2),k=f[0],v=f[1],g=Object(o.useState)(),m=Object(b.a)(g,2),y=m[0],B=m[1];function N(){return(N=Object(d.a)(l.a.mark((function e(t){var c,o,s,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("async createBook ".concat(JSON.stringify(t))),v(!0),c={method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)},e.prev=3,e.next=6,fetch("".concat("https://rest-app-server.herokuapp.com/books"),c);case 6:return o=e.sent,e.next=9,o.json();case 9:s=e.sent,o.ok?(console.log("   async createBook: received response ".concat(JSON.stringify(s))),r([].concat(Object(u.a)(n),[s])),console.log("   async createBook: done"),B("book ".concat(t.title," created"))):(console.log("   async createBook: ERROR: ".concat(o.status," - ").concat(s.error," - ").concat(s.message," ")),a=s.errors&&s.errors.reduce((function(e,t){return"".concat(e," ").concat(t.defaultMessage,"  --- ")}),"--- "),console.log("   ".concat(JSON.stringify(s))),console.log("   ".concat(a)),B(a||s.message)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.log("   async createBook: ERROR ".concat(e.t0)),B("Connection error");case 17:v(!1);case 18:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function S(){return(S=Object(d.a)(l.a.mark((function e(t){var c,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return console.log("async editBook"),v(!0),c={method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)},e.prev=5,e.next=8,fetch("".concat("https://rest-app-server.herokuapp.com/books","/").concat(t.id),c);case 8:return o=e.sent,e.next=11,o.json();case 11:s=e.sent,o.ok?(console.log("   async editBook: received response ".concat(JSON.stringify(s))),r(n.map((function(e){return e.id===s.id?s:e}))),console.log("   async editBook: done"),B("book ".concat(t.title," modified"))):(console.log("   async editBook: ERROR: ".concat(o.status," - ").concat(s.error," - ").concat(s.message," ")),B(s.message)),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(5),console.log("   async deleteBook: ERROR ".concat(e.t0)),B("Connection error");case 19:v(!1);case 20:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}function w(e){return C.apply(this,arguments)}function C(){return(C=Object(d.a)(l.a.mark((function e(t){var c,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("async deleteBook"),v(!0),c={method:"DELETE"},e.prev=3,e.next=6,fetch("".concat("https://rest-app-server.herokuapp.com/books","/").concat(t.id),c);case 6:if(!(o=e.sent).ok){e.next=14;break}console.log("   async deleteBook: received response "),r(n.filter((function(e){return e.id!==t.id}))),console.log("   async deleteBook: done"),B("book ".concat(t.title," deleted")),e.next=19;break;case 14:return e.next=16,o.json();case 16:s=e.sent,console.log("   async deleteBook: ERROR: ".concat(o.status," - ").concat(s.error," - ").concat(s.message," ")),B(s.message);case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(3),console.log("   async deleteBook: ERROR ".concat(e.t0)),B("Connection error");case 25:v(!1);case 26:case"end":return e.stop()}}),e,null,[[3,21]])})))).apply(this,arguments)}function R(){return E.apply(this,arguments)}function E(){return(E=Object(d.a)(l.a.mark((function e(){var t,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("   async getBooks: start"),v(!0),e.prev=2,t={method:"GET",credentials:"include",headers:{"Content-Type":"application/json;charset=utf8",authorization:"Basic "+window.btoa("sammy:sammy")}},e.next=6,fetch("".concat("https://rest-app-server.herokuapp.com/books"),t);case 6:return n=e.sent,e.next=9,n.json();case 9:c=e.sent,console.log("   async getBooks: received response ".concat(JSON.stringify(c))),r(c),console.log("   async getBooks: done"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),console.log("   async getBooks: ERROR ".concat(e.t0)),B("Connection error");case 19:v(!1);case 20:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}return console.log("render App()"),Object(o.useEffect)((function(){console.log("useEffect: start"),R(),console.log("useEffect: back after getBooks"),console.log("useEffect: done")}),[]),Object(c.jsxs)("div",{className:"App",children:[!!k&&Object(c.jsx)("p",{className:"isLoading",children:"LOADING DATA!!!"}),!!y&&Object(c.jsx)("p",{className:"message",onClick:function(){return B()},children:y}),Object(c.jsx)("button",{onClick:R,children:"refresh"}),Object(c.jsx)("div",{className:"booksList",children:n.map((function(e){return Object(c.jsx)(O,{book:e,setSelectedBook:p,deleteBook:w},e.title)}))}),Object(c.jsx)(j,{selectedBook:i,createBook:function(e){return N.apply(this,arguments)}}),Object(c.jsx)(h,{selectedBook:i,setSelectedBook:p,editBook:function(e){return S.apply(this,arguments)}})]})},f=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),o(e),r(e),s(e)}))};a.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(x,{})}),document.getElementById("root")),f()}},[[19,1,2]]]);
//# sourceMappingURL=main.696115a9.chunk.js.map